<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Animacel</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="Untitled_files/libs/clipboard/clipboard.min.js"></script>
<script src="Untitled_files/libs/quarto-html/quarto.js"></script>
<script src="Untitled_files/libs/quarto-html/popper.min.js"></script>
<script src="Untitled_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Untitled_files/libs/quarto-html/anchor.min.js"></script>
<link href="Untitled_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Untitled_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Untitled_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Untitled_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Untitled_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Animacel</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="časovni-interval-med-terapijami" class="level2">
<h2 class="anchored" data-anchor-id="časovni-interval-med-terapijami">Časovni interval med terapijami</h2>
<section id="kakšna-je-povprečen-čas-med-prvo-in-drugo-aplikacijo-terapije-pri-pacientih" class="level3">
<h3 class="anchored" data-anchor-id="kakšna-je-povprečen-čas-med-prvo-in-drugo-aplikacijo-terapije-pri-pacientih">Kakšna je povprečen čas med prvo in drugo aplikacijo terapije pri pacientih?</h3>
<p>Za izračun povprečnega časa med prvo in drugo aplikacijo potrebujemo datum prve aplikacije. Tega datuma nima 258 pacientov. Mankajoče datume smo nadomestili z vsoto spremenljivk sample collection date in mediano število dni med sample collection date in first application date. Porazdelitev teh dni je vidna na <a href="#fig-dates-sample-collection-first-app" class="quarto-xref">Figure&nbsp;1</a>.</p>
<div id="cell-fig-dates-sample-collection-first-app" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Data preparation</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Before the analysis some values were removed by hand. Some "?"'s were removed and incomplete dates were removed</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. treatment of 'First application date'</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_excel(<span class="st">"data_for_analysis.xlsx"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'Sample collection date'</span>] <span class="op">=</span> pd.to_datetime(data[<span class="st">'Sample collection date'</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'First application date'</span>] <span class="op">=</span> pd.to_datetime(data[<span class="st">'First application date'</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">'Sample collection date'</span>]<span class="op">&gt;</span>data[<span class="st">'First application date'</span>],<span class="st">'First application date'</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>notna_dates_indexes <span class="op">=</span> pd.notna(data[<span class="st">'Sample collection date'</span>])<span class="op">&amp;</span>pd.notna(data[<span class="st">'First application date'</span>])</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>date_differences <span class="op">=</span> (data[<span class="st">'First application date'</span>][notna_dates_indexes]<span class="op">-</span>data[<span class="st">'Sample collection date'</span>][notna_dates_indexes]).dt.days</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>date_differences[date_differences<span class="op">&lt;</span><span class="dv">80</span>].hist(bins<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span><span class="bu">sum</span>(data[<span class="st">'First application date'</span>].isnull())<span class="sc">}</span><span class="ss"> don't have 1st application date"</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Median value of days between sample collection and first application is </span><span class="sc">{</span>date_differences<span class="sc">.</span>median()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean value of days between sample collection and first application is </span><span class="sc">{</span>date_differences<span class="sc">.</span>mean()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>imputed_days_value <span class="op">=</span> date_differences.mean()</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert imputed_days_value to a timedelta</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>timedelta_value <span class="op">=</span>pd.to_timedelta(imputed_days_value, unit<span class="op">=</span><span class="st">'D'</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'first_application_data_cleaned'</span>]<span class="op">=</span>data[<span class="st">'First application date'</span>]</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">'First application date'</span>].isnull(),<span class="st">'first_application_data_cleaned'</span>]<span class="op">=</span>data[<span class="st">'Sample collection date'</span>] <span class="op">+</span> timedelta_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>258 don't have 1st application date
Median value of days between sample collection and first application is 22.0
Mean value of days between sample collection and first application is 33.586080586080584</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-dates-sample-collection-first-app" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dates-sample-collection-first-app-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Untitled_files/figure-html/fig-dates-sample-collection-first-app-output-2.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dates-sample-collection-first-app-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Distribution of days between sample collection date and first application date
</figcaption>
</figure>
</div>
</div>
</div>
<div id="4f7ee4c4-2e66-4b20-a54f-4d90dfc808a0" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create function for consolidation of indcations</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> normalize_text(indication_string: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">list</span>:</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">""" This function assings indiaciton groups to the indication from the list."""</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    indication_string <span class="op">=</span> <span class="bu">str</span>(indication_string)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    list_of_indications <span class="op">=</span> []</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> re.search(<span class="vs">r"\b(OCD|Osteochondritis Disecans)\b"</span>, indication_string, re.I):</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"OCD"</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> re.search(<span class="vs">r"\b(OA|Osteoarthritis|Ostearthritis|Osteoarthrosis|Arthrosis|Asthrosis|Athrosis)\b"</span>, indication_string,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>                 re.I):</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"OA"</span>)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Arthrosis for elbow.</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> re.search(<span class="vs">r"\b(Cubarthrosis|Cubarthorosis|Cuboarthrosis|Cubsrthrosis|Cubioarthrosis|Elbow( joint)? arthrosis|(OA (\(Osteoarthritis\))?|Osteoarthritis) Cub(\.|iti) (dex( et. sin)?|sin( et. dex)?)?|arthrosis of (the )?elbow( joints?)?)\b"</span>, indication_string, re.I):</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"OA"</span>)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"Cubarthrosis"</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Arthrosis for shoulder.</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> re.search(<span class="vs">r"\b(Omarthrosis|shoulder (joints? )?Arthrosis|arthrosis( (of|in))?( (the|both))? shoulder( joints?)?)\b"</span>, indication_string, re.I):</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"OA"</span>)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"Omarthrosis"</span>)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Arthrosis for knee.</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> re.search(<span class="vs">r"\b(Gonarthrosis|arthrosis( (of|in))?( (the|both))? knee( joints?)?|knee( joints? )?Arthrosis)\b"</span>, indication_string, re.I):</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"OA"</span>)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"Gonarthrosis"</span>)</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Arthrosis for hip.</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> re.search(<span class="vs">r"\b(Coxarthrosis|arthrosis( (of|in))?( (the|both))? hip( joints?)?|hip( joints? )?Arthrosis|(OA (\(Osteoarthritis\))?|Osteoarthritis) gax. (dex( et. sin)?|sin( et. dex)?)?)\b"</span>, indication_string, re.I):</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"OA"</span>)</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"Coxarthrosis"</span>)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># cranial cruciate ligament</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> re.search(<span class="vs">r"\b(CCL|cranial cruciate ligament)\b"</span>, indication_string, re.I):</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"CCL"</span>)</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fragmented Coronoid Process</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> re.search(<span class="vs">r"\b(FCP|FPC|Fragmented Coronoid Process)\b"</span>, indication_string, re.I):</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"FPC"</span>)</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Hip dysplasia.</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> re.search(<span class="vs">r"\b(Hip dysplasia|HD|Dysplasia coxae)\b"</span>, indication_string, re.I):</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"HD"</span>)</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Elbow dysplasia.</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> re.search(<span class="vs">r"\b(Elbow joint dysplasia|Elbow dysplasia|ED)\b"</span>, indication_string, re.I):</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"ED"</span>)</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> re.search(<span class="vs">r"\b(arthritis)\b"</span>, indication_string, re.I):</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"Arthritis"</span>)</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> indication_string <span class="kw">and</span> <span class="kw">not</span> list_of_indications:</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>        list_of_indications.append(<span class="st">"Other"</span>)</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">list</span>(<span class="bu">set</span>(list_of_indications))</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'Indication_list'</span>] <span class="op">=</span> data[<span class="st">'Indication'</span>].<span class="bu">apply</span>(normalize_text)</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a><span class="co"># data['nr_of_indications'] = data['Indication'].apply(</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a><span class="co">#     lambda x: len(re.split(r"(?:\+|\,|\bafter\b|\&amp;|\band\b)", str(x))))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="b831d068-4901-4819-ab02-12e52efa2172" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove dates where second application date happened before first application date.</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'Second application date'</span>] <span class="op">=</span> pd.to_datetime(data[<span class="st">'Second application date'</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'Third application date'</span>] <span class="op">=</span> pd.to_datetime(data[<span class="st">'Third application date'</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">'Second application date'</span>]<span class="op">&lt;=</span>data[<span class="st">'first_application_data_cleaned'</span>],<span class="st">'Second application date'</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">'Third application date'</span>]<span class="op">&lt;=</span>data[<span class="st">'Second application date'</span>],<span class="st">'Third application date'</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"age_at_first_appliction"</span>] <span class="op">=</span> (data[<span class="st">'first_application_data_cleaned'</span>].dt.year <span class="op">-</span> data[<span class="st">"Birth year"</span>])</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"age_at_first_appliction_str"</span>] <span class="op">=</span> data[<span class="st">"age_at_first_appliction"</span>].astype(<span class="bu">str</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"age_at_first_appliction_str"</span>] <span class="op">=</span> data[<span class="st">"age_at_first_appliction_str"</span>].<span class="bu">str</span>.replace(<span class="st">".0"</span>, <span class="st">""</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create age groups:</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Age groups</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"># od 0 do 2 let,</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># od 2 do 6 let,</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co"># od 6 do 10 let,</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co"># več kot 10 let.</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">"age_at_first_appliction"</span>].astype(<span class="bu">bool</span>),<span class="st">"age_group"</span>] <span class="op">=</span> <span class="st">"from 0 to 2"</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>data.loc[<span class="dv">2</span> <span class="op">&lt;</span> data[<span class="st">"age_at_first_appliction"</span>],<span class="st">"age_group"</span>] <span class="op">=</span> <span class="st">"from 2 to 6"</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>data.loc[<span class="dv">6</span> <span class="op">&lt;</span> data[<span class="st">"age_at_first_appliction"</span>],<span class="st">"age_group"</span>] <span class="op">=</span> <span class="st">"from 6 to 10"</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>data.loc[<span class="dv">10</span> <span class="op">&lt;</span> data[<span class="st">"age_at_first_appliction"</span>],<span class="st">"age_group"</span>] <span class="op">=</span> <span class="st">"more than 10"</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">"age_at_first_appliction"</span>].isnull(),<span class="st">"age_group"</span>] <span class="op">=</span> <span class="st">"unkown"</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Preparte nr of joints 1st</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"Nr_joints treated_1_cleaned"</span>] <span class="op">=</span> data[<span class="st">"Nr_joints treated_1_cleaned"</span>].astype(<span class="bu">str</span>)</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"Nr_joints treated_1_cleaned"</span>]<span class="op">=</span>data[<span class="st">"Nr_joints treated_1_cleaned"</span>].<span class="bu">str</span>.replace(<span class="vs">r"\?"</span>, <span class="st">""</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">"Nr_joints treated_1_cleaned"</span>].<span class="bu">str</span>.contains(<span class="vs">r"[A-Za-z]"</span>, regex<span class="op">=</span><span class="va">True</span>), <span class="st">"Nr_joints treated_1_cleaned"</span>] <span class="op">=</span> np.nan</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">"Nr_joints treated_1_cleaned"</span>] <span class="op">==</span> <span class="st">""</span>, <span class="st">"Nr_joints treated_1_cleaned"</span>] <span class="op">=</span> np.nan</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">"Nr_joints treated_1_cleaned"</span>] <span class="op">==</span> <span class="st">" "</span>, <span class="st">"Nr_joints treated_1_cleaned"</span>] <span class="op">=</span> np.nan</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"Nr_joints treated_1_cleaned"</span>].astype(<span class="bu">float</span>)</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Preparte nr of joints 2nd</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"Nr_joints treated_2_cleaned"</span>] <span class="op">=</span> data[<span class="st">"Nr_joints treated_2"</span>].astype(<span class="bu">str</span>)</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"Nr_joints treated_2_cleaned"</span>]<span class="op">=</span>data[<span class="st">"Nr_joints treated_2_cleaned"</span>].<span class="bu">str</span>.replace(<span class="vs">r"\?"</span>, <span class="st">""</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">"Nr_joints treated_2_cleaned"</span>].<span class="bu">str</span>.contains(<span class="vs">r"[A-Za-z]"</span>, regex<span class="op">=</span><span class="va">True</span>), <span class="st">"Nr_joints treated_2_cleaned"</span>] <span class="op">=</span> np.nan</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">"Nr_joints treated_2_cleaned"</span>] <span class="op">==</span> <span class="st">""</span>, <span class="st">"Nr_joints treated_2_cleaned"</span>] <span class="op">=</span> np.nan</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">"Nr_joints treated_2_cleaned"</span>] <span class="op">==</span> <span class="st">" "</span>, <span class="st">"Nr_joints treated_2_cleaned"</span>] <span class="op">=</span> np.nan</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyste dates between 1st and 2nd treatment.</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>data_with_dates <span class="op">=</span> data[<span class="op">~</span>data[<span class="st">'first_application_data_cleaned'</span>].isnull()]</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>data_with_2nd_dates <span class="op">=</span> data_with_dates[<span class="op">~</span>data_with_dates[<span class="st">'Second application date'</span>].isnull()]</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Get days differemce to int.</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>data_with_2nd_dates <span class="op">=</span> data_with_2nd_dates[data_with_2nd_dates[<span class="st">'Second application date'</span>]<span class="op">&gt;</span>data_with_2nd_dates[<span class="st">'first_application_data_cleaned'</span>]]</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>] <span class="op">=</span> (data_with_2nd_dates[<span class="st">'Second application date'</span>]<span class="op">-</span>data_with_2nd_dates[<span class="st">'first_application_data_cleaned'</span>]).dt.days</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a><span class="co"># print(f"Wrong dates {sum(data_with_2nd_dates['Second application date']&lt;data_with_2nd_dates['Sample collection date'])}")</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>data_with_2nd_dates[<span class="st">"1st-2nd-treatment_months"</span>] <span class="op">=</span> data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>]<span class="op">/</span><span class="dv">30</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Med pacienti je 163 pacientov z vsaj dvemi zdravljenji. Porazdelitev dni med drugo in prvo aplikacijo je razvidna iz slike <a href="#fig-second-first-dist" class="quarto-xref">Figure&nbsp;2</a>. Mediana vrednost števila dni je 357 dni in povprečna vrednost je 462 dni.</p>
<div id="a8d66cdb-17a1-452c-8d5f-345e0075537c" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Število pacientov z 2mi zdravaljenji </span><span class="sc">{</span><span class="bu">len</span>(data_with_2nd_dates[<span class="st">'1st-2nd-treatment_days'</span>])<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Število pacientov ki se je vrnilo pred 500. dnevom </span><span class="sc">{</span><span class="bu">sum</span>(data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>]<span class="op">&lt;</span><span class="dv">501</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Median values of treatments is </span><span class="sc">{</span>data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>]<span class="sc">.</span>median()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean values of treatments is </span><span class="sc">{</span>data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>]<span class="sc">.</span>mean()<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Število pacientov z 2mi zdravaljenji 163
Število pacientov ki se je vrnilo pred 500. dnevom 110
Median values of treatments is 357.0
Mean values of treatments is 462.4723926380368</code></pre>
</div>
</div>
<div id="cell-fig-second-first-dist" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating the histogram.</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>plt.hist(data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>], bins<span class="op">=</span><span class="dv">14</span>,  edgecolor<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Histogram of Days Between 1st and 2nd Treatment"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Days between 1st and 2nd Treatment"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Frequency"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-second-first-dist" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-second-first-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Untitled_files/figure-html/fig-second-first-dist-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-second-first-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Histrogram of days between 1st and 2nd treatment
</figcaption>
</figure>
</div>
</div>
</div>
<p>Ker podatki hitro postanejo fragmentirani, bomo število dni med prvo in drugo terapijo razdelili v 4 skupine:<br>
1. manj kot 1 leto dni – comparable,<br>
2. od 1 do 1,5 leta dni – good,<br>
3. od 1,5 do 2 leti dni – very good,<br>
4. več kot 2 leti dni – excellent.<br>
<br>
Iz histograma <a href="#fig-distribution-of-success" class="quarto-xref">Figure&nbsp;3</a> je razvidno, da je naštevilčnejša skupina comparable.<br>
Struktura teh skupine glede na starostne skupine je razvidna iz grafa <a href="#tbl-mytable" class="quarto-xref">Table&nbsp;1</a>.<br>
</p>
<div id="cell-fig-distribution-of-success" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kategorije glede na uspešnost</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># manj kot 1 leto – comparable,</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># od 1 do 1,5 leta – good,</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># od 1,5 do 2 leti – very good,</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># več kot 2 leti – excellent.</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># data_with_2nd_dates.loc[data_with_2nd_dates["age_group"] == age_group, "1st-2nd-treatment_days"]</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>data_with_2nd_dates[<span class="st">"success_of_therapy"</span>]<span class="op">=</span><span class="st">"comparable"</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>data_with_2nd_dates.loc[data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>]<span class="op">&gt;</span><span class="dv">360</span>, <span class="st">"success_of_therapy"</span>]<span class="op">=</span><span class="st">"good"</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>data_with_2nd_dates.loc[data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>]<span class="op">&gt;</span><span class="dv">540</span>, <span class="st">"success_of_therapy"</span>]<span class="op">=</span><span class="st">"very good"</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>data_with_2nd_dates.loc[data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>]<span class="op">&gt;</span><span class="dv">720</span>, <span class="st">"success_of_therapy"</span>]<span class="op">=</span><span class="st">"excellent"</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>sucess_groups <span class="op">=</span> [<span class="st">"comparable"</span>, <span class="st">"good"</span>, <span class="st">"very good"</span>, <span class="st">"excellent"</span>]</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>sns.countplot(data_with_2nd_dates, x<span class="op">=</span><span class="st">"success_of_therapy"</span>, order<span class="op">=</span>sucess_groups)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-distribution-of-success" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-distribution-of-success-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Untitled_files/figure-html/fig-distribution-of-success-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-distribution-of-success-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Distribution of sucess groups.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Med 163 pacienti je 35 pacientov za katere lahko povemo, kateri sklepi so bili zdravljeni med prvim zdravljenjem in kateri sklepi med drugim zdravljenjem. Ta zdravljenja bomo razdelili v 3 skupine:<br>
1. same – Pri tej skupini gre za zdravljenje istega sklepa, zdravljenje istega sklepa in dodatnega sklepa.<br>
2. different – Pri tej skupini gre za zdravljenje drugega sklepa. Če se je med prvim zdravljenjem zdravilo več sklepov, pri drugem zdravljenju pa vsaj en sklep manj, je bilo to zdravljenje prav tako član te skupine.<br>
3. unknown – Pri tej skupini ne vemo ali je šlo za zdravljenje istega sklepa ali ne (npr. Left elbow -&gt; elbow).<br>
</p>
<p>Potek klasifikacije je razviden iz tabele <a href="#tbl-mytable" class="quarto-xref">Table&nbsp;1</a>. Na sliki <a href="#fig-same-different-joints" class="quarto-xref">Figure&nbsp;4</a>. pa lahko vidimo, da si več kot 50% iz skupine comparable zdravi drug sklep.</p>
<div id="cf6fd28d-9d57-47ef-a785-82052fbeb8ab" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>data_with_2nd_dates[<span class="st">"joint_combinations"</span>] <span class="op">=</span>(data_with_2nd_dates[<span class="st">"Nr_joints treated_1_cleaned"</span>].astype(<span class="bu">str</span>) <span class="op">+</span><span class="st">" "</span><span class="op">+</span>data_with_2nd_dates[<span class="st">"Joints treated"</span>] <span class="op">+</span><span class="st">" -&gt; "</span> <span class="op">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a> <span class="st">" "</span><span class="op">+</span>data_with_2nd_dates[<span class="st">"Nr_joints treated_2_cleaned"</span>].astype(<span class="bu">str</span>) <span class="op">+</span><span class="st">" "</span><span class="op">+</span>data_with_2nd_dates[<span class="st">"Joints treated.1"</span>])</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>final_classification <span class="op">=</span> {</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2 left crown joint -&gt;  2 double amount of cells'</span>:<span class="st">"unknown"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 Knee, donor cells -&gt;  1 donor cells of AT3317'</span>:<span class="st">"unknown"</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 right Elbow -&gt;  1 Other elbow'</span>: <span class="st">"different"</span>, </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2 2 Elbow -&gt;  2 double amount'</span>: <span class="st">"unknown"</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 left Shoulder -&gt;  1 different joint'</span>: <span class="st">"different"</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 left Knee -&gt;  1 right Knee'</span>: <span class="st">"different"</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 Shoulder -&gt;  4 2 Elbow, 2 Shoulder'</span>: <span class="st">"same"</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 Knee, double amount of cells -&gt;  1 Same knee, double amount of cells'</span>: <span class="st">"same"</span>,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2 2 Elbow -&gt;  1 left Elbow'</span>: <span class="st">"different"</span>, </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2 2 Knee -&gt;  2  same, knees'</span>: <span class="st">"same"</span>,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 left Shoulder -&gt;  1 Spine'</span>: <span class="st">"different"</span>, </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 left Elbow -&gt;  3 2 Hip, 1 Elbow'</span>:<span class="st">"unknown"</span>,</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 Right Ankle -&gt;  1 Same'</span>: <span class="st">"same"</span>, </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2 2 Elbow -&gt;  1 Different joint'</span>: <span class="st">"different"</span>,</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">'3 1 Elbow, 2 Knee -&gt;  1 1 joint out of 4 treated got symptomatic again'</span>: <span class="st">"different"</span>,</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2 1 Shoulder, 1 Elbow -&gt;  2 Other side 2 joints'</span>: <span class="st">"different"</span>,</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 right Knee -&gt;  2 2 Hips'</span>: <span class="st">"different"</span>, </span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 right Knee -&gt;  1 12 Mio cells'</span>:<span class="st">"unknown"</span>,</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 Knee -&gt;  1 Knee'</span>:<span class="st">"unknown"</span>, </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 right Elbow -&gt;  2 1 L knee, 1 L elbow'</span>: <span class="st">"different"</span>,</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2 2 Hip -&gt;  2 2 Elbow'</span>: <span class="st">"different"</span>,</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2 2 Elbow -&gt;  2 2 Knee, different than 1st'</span>: <span class="st">"different"</span>,</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2 1 Knee, 1 Hip -&gt;  1 right Knee'</span>: <span class="st">"different"</span>,</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 right Elbow -&gt;  1 Same joint'</span>: <span class="st">"same"</span>, </span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 left Elbow -&gt;  1 Same'</span>: <span class="st">"same"</span>,</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 left Elbow -&gt;  1 right Elbow, different joint'</span>: <span class="st">"different"</span>,</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 right Hip -&gt;  1 additional'</span>: <span class="st">"different"</span>, </span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 1 Knee -&gt;  1 Same joint'</span>: <span class="st">"same"</span>,</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 Elbow -&gt;  1 same joint'</span>: <span class="st">"same"</span>, </span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">'1 left Elbow -&gt;  1 same joint'</span>: <span class="st">"same"</span>,</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>     <span class="st">'1 Elbow -&gt;  2 additional'</span>:<span class="st">"unknown"</span>, </span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>     <span class="st">'2 2 Elbow -&gt;  1 additional'</span>: <span class="st">"different"</span>,</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>     <span class="st">'2 2 Elbow -&gt;  1 Right elbow?'</span>: <span class="st">"different"</span>,</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>     <span class="st">'1 front left Fetlock -&gt;  1 same joint'</span>: <span class="st">"same"</span>, </span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>     <span class="st">'1 Hip -&gt;  1 Elbow'</span>: <span class="st">"different"</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>data_with_2nd_dates[<span class="st">"same_different_joint"</span>]<span class="op">=</span>data_with_2nd_dates[<span class="st">"joint_combinations"</span>].<span class="bu">map</span>(final_classification)</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>data_with_2nd_dates[<span class="st">"same_different_joint"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>same_different_joint
different    18
same         10
unknown       7
Name: count, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-tbl-pos="H" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> display</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>table_of_interest <span class="op">=</span> data_with_2nd_dates.loc[<span class="op">~</span>data_with_2nd_dates[<span class="st">"same_different_joint"</span>].isnull(),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>[<span class="st">"Nr_joints treated_1_cleaned"</span>, <span class="st">"Joints treated"</span>, <span class="st">"Nr_joints treated_2_cleaned"</span> , <span class="st">"Joints treated.1"</span>, <span class="st">"same_different_joint"</span>]].reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>display(table_of_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-mytable" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-pos="H" data-execution_count="8">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mytable-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: This is awesome
</figcaption>
<div aria-describedby="tbl-mytable-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Nr_joints treated_1_cleaned</th>
<th data-quarto-table-cell-role="th">Joints treated</th>
<th data-quarto-table-cell-role="th">Nr_joints treated_2_cleaned</th>
<th data-quarto-table-cell-role="th">Joints treated.1</th>
<th data-quarto-table-cell-role="th">same_different_joint</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2</td>
<td>left crown joint</td>
<td>2</td>
<td>double amount of cells</td>
<td>unknown</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1</td>
<td>Knee, donor cells</td>
<td>1</td>
<td>donor cells of AT3317</td>
<td>unknown</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1</td>
<td>right Elbow</td>
<td>1</td>
<td>Other elbow</td>
<td>different</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2</td>
<td>2 Elbow</td>
<td>2</td>
<td>double amount</td>
<td>unknown</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1</td>
<td>left Shoulder</td>
<td>1</td>
<td>different joint</td>
<td>different</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>1</td>
<td>left Knee</td>
<td>1</td>
<td>right Knee</td>
<td>different</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>1</td>
<td>Shoulder</td>
<td>4</td>
<td>2 Elbow, 2 Shoulder</td>
<td>same</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>1</td>
<td>Knee, double amount of cells</td>
<td>1</td>
<td>Same knee, double amount of cells</td>
<td>same</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>2</td>
<td>2 Elbow</td>
<td>1</td>
<td>left Elbow</td>
<td>different</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>2</td>
<td>2 Knee</td>
<td>2</td>
<td>same, knees</td>
<td>same</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>1</td>
<td>left Shoulder</td>
<td>1</td>
<td>Spine</td>
<td>different</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>1</td>
<td>left Elbow</td>
<td>3</td>
<td>2 Hip, 1 Elbow</td>
<td>unknown</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>1</td>
<td>Right Ankle</td>
<td>1</td>
<td>Same</td>
<td>same</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>2</td>
<td>2 Elbow</td>
<td>1</td>
<td>Different joint</td>
<td>different</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>3</td>
<td>1 Elbow, 2 Knee</td>
<td>1</td>
<td>1 joint out of 4 treated got symptomatic again</td>
<td>different</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>2</td>
<td>1 Shoulder, 1 Elbow</td>
<td>2</td>
<td>Other side 2 joints</td>
<td>different</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>1</td>
<td>right Knee</td>
<td>2</td>
<td>2 Hips</td>
<td>different</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>1</td>
<td>right Knee</td>
<td>1</td>
<td>12 Mio cells</td>
<td>unknown</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>1</td>
<td>Knee</td>
<td>1</td>
<td>Knee</td>
<td>unknown</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>1</td>
<td>right Elbow</td>
<td>2</td>
<td>1 L knee, 1 L elbow</td>
<td>different</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>2</td>
<td>2 Hip</td>
<td>2</td>
<td>2 Elbow</td>
<td>different</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>2</td>
<td>2 Elbow</td>
<td>2</td>
<td>2 Knee, different than 1st</td>
<td>different</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>2</td>
<td>1 Knee, 1 Hip</td>
<td>1</td>
<td>right Knee</td>
<td>different</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>1</td>
<td>right Elbow</td>
<td>1</td>
<td>Same joint</td>
<td>same</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24</td>
<td>1</td>
<td>left Elbow</td>
<td>1</td>
<td>Same</td>
<td>same</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>1</td>
<td>left Elbow</td>
<td>1</td>
<td>right Elbow, different joint</td>
<td>different</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">26</td>
<td>1</td>
<td>right Hip</td>
<td>1</td>
<td>additional</td>
<td>different</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>1</td>
<td>1 Knee</td>
<td>1</td>
<td>Same joint</td>
<td>same</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28</td>
<td>1</td>
<td>Elbow</td>
<td>1</td>
<td>same joint</td>
<td>same</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29</td>
<td>1</td>
<td>left Elbow</td>
<td>1</td>
<td>same joint</td>
<td>same</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">30</td>
<td>1</td>
<td>Elbow</td>
<td>2</td>
<td>additional</td>
<td>unknown</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">31</td>
<td>2</td>
<td>2 Elbow</td>
<td>1</td>
<td>additional</td>
<td>different</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">32</td>
<td>2</td>
<td>2 Elbow</td>
<td>1</td>
<td>Right elbow?</td>
<td>different</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33</td>
<td>1</td>
<td>front left Fetlock</td>
<td>1</td>
<td>same joint</td>
<td>same</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">34</td>
<td>1</td>
<td>Hip</td>
<td>1</td>
<td>Elbow</td>
<td>different</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<div id="cell-fig-same-different-joints" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>success_groups <span class="op">=</span> [<span class="st">"comparable"</span>, <span class="st">"good"</span>, <span class="st">"very good"</span>, <span class="st">"excellent"</span>]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>filtered_data <span class="op">=</span> data_with_2nd_dates[<span class="op">~</span>data_with_2nd_dates[<span class="st">"same_different_joint"</span>].isnull()]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot the data to get the counts for each combination of 'success_of_therapy' and 'same_different_joint'</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>pivot_data <span class="op">=</span> filtered_data.groupby([<span class="st">'success_of_therapy'</span>, <span class="st">'same_different_joint'</span>]).size().unstack(fill_value<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder the pivot table according to the success groups</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>pivot_data <span class="op">=</span> pivot_data.reindex(success_groups)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the stacked bar plot</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>pivot_data.plot(kind<span class="op">=</span><span class="st">'bar'</span>, stacked<span class="op">=</span><span class="va">True</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">7</span>), color<span class="op">=</span>[<span class="st">'#1f77b4'</span>, <span class="st">'#ff7f0e'</span>, <span class="st">'#2ca02c'</span>])</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Success of Therapy Stacked by Same/Different Joint"</span>)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Success of Therapy"</span>)</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Count"</span>)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">"Same/Different Joint"</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.05</span>, <span class="dv">1</span>), loc<span class="op">=</span><span class="st">'upper left'</span>)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-same-different-joints" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-same-different-joints-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Untitled_files/figure-html/fig-same-different-joints-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-same-different-joints-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Distribution of joint treatmets
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="ali-obstajajo-pomembni-vzorci-v-časovnih-intervalih-glede-starost" class="level3">
<h3 class="anchored" data-anchor-id="ali-obstajajo-pomembni-vzorci-v-časovnih-intervalih-glede-starost">Ali obstajajo pomembni vzorci v časovnih intervalih glede starost?</h3>
<p>Porazdelitev starosti pri prvi aplikaciji je vidna na sliki <a href="#fig-distribution-of-ages" class="quarto-xref">Figure&nbsp;5</a>. V levem stolpcu grafov imamo vse paciente. V desnem pa samo paciente, ki so prejeli dve zdravljenji. Iz prve vrstice grafov je mogoče razbrati, da je porazdelitev pomaknjena v desno. Pacienti, ki so prejeli 2 zdravljenji so nekoliko mlajši. Paciente smo glede na starost porazdelili v 4 skupine:<br>
* od 0 do 2 let,<br>
* od 2 do 6 let,<br>
* od 6 do 10 let,<br>
* več kot 10 let.<br>
</p>
<p>Porazdelitve teh skupin so razvidne v drugi vrstici grafov. Razvidno je da sta pri pacientih, ki so prejeli obe zdravljenji, številčnejši prvi dve starostni skupini.</p>
<div id="cell-fig-distribution-of-ages" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot age at first application</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">10</span>))  <span class="co"># Adjust figure size as needed</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>ordered_age_groups <span class="op">=</span> [<span class="st">"from 0 to 2"</span>, <span class="st">"from 2 to 6"</span>, <span class="st">"from 6 to 10"</span>, <span class="st">"more than 10"</span>]</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 1: Age at first application from data</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"darkgrid"</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>sns.countplot(x<span class="op">=</span><span class="st">"age_at_first_appliction_str"</span>, data<span class="op">=</span>data, </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>              order<span class="op">=</span>[<span class="bu">str</span>(age) <span class="cf">for</span> age <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">25</span>)], ax<span class="op">=</span>axes[<span class="dv">0</span>, <span class="dv">0</span>], stat<span class="op">=</span><span class="st">"probability"</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>, <span class="dv">0</span>].set_title(<span class="st">"Age at First Application (All treatments)"</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>, <span class="dv">0</span>].set_ylim(<span class="dv">0</span>, <span class="fl">0.12</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 2: Age group at first application from data</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>sns.countplot(x<span class="op">=</span><span class="st">"age_group"</span>, data<span class="op">=</span>data, </span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>              order<span class="op">=</span>ordered_age_groups, ax<span class="op">=</span>axes[<span class="dv">1</span>, <span class="dv">0</span>], stat<span class="op">=</span><span class="st">"probability"</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>, <span class="dv">0</span>].set_title(<span class="st">"Age Group at First Application (All treatments)"</span>)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>, <span class="dv">0</span>].set_ylim(<span class="dv">0</span>, <span class="fl">0.35</span>)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 3: Age at first application from data_with_2nd_dates</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>sns.countplot(x<span class="op">=</span><span class="st">"age_at_first_appliction_str"</span>, data<span class="op">=</span>data_with_2nd_dates, </span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>              order<span class="op">=</span>[<span class="bu">str</span>(age) <span class="cf">for</span> age <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">25</span>)], ax<span class="op">=</span>axes[<span class="dv">0</span>, <span class="dv">1</span>], stat<span class="op">=</span><span class="st">"probability"</span>)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>, <span class="dv">1</span>].set_title(<span class="st">"Age at First Application (2 treatments)"</span>)</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>, <span class="dv">1</span>].set_ylim(<span class="dv">0</span>, <span class="fl">0.12</span>)</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 4: Age group at first application from data_with_2nd_dates</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>sns.countplot(x<span class="op">=</span><span class="st">"age_group"</span>, data<span class="op">=</span>data_with_2nd_dates, </span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>              order<span class="op">=</span>ordered_age_groups, ax<span class="op">=</span>axes[<span class="dv">1</span>, <span class="dv">1</span>], stat<span class="op">=</span><span class="st">"probability"</span>)</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>, <span class="dv">1</span>].set_title(<span class="st">"Age Group at First Application (2 treatments)"</span>)</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>, <span class="dv">1</span>].set_ylim(<span class="dv">0</span>, <span class="fl">0.35</span>)</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust layout</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-distribution-of-ages" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-distribution-of-ages-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Untitled_files/figure-html/fig-distribution-of-ages-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-distribution-of-ages-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Distribution of ages at first applicaiton
</figcaption>
</figure>
</div>
</div>
</div>
<p>Analizo števila dni med prvo in drugo aplikacijo smo razširili na prej omenjene starostne skupine. Na sliki <a href="#fig-distribution-of-ages-days" class="quarto-xref">Figure&nbsp;6</a> je mogoče opaziti, da se pacienti iz starejših starostnih skupin v povrpečju vrnejo hitreje.</p>
<div id="cell-fig-distribution-of-ages-days" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the bin edges manually, for example:</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>min_days <span class="op">=</span> data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>].<span class="bu">min</span>()</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>max_days <span class="op">=</span> data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>].<span class="bu">max</span>()</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>bins <span class="op">=</span> np.linspace(min_days, max_days, <span class="dv">15</span>)  <span class="co"># 14 bins</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a 2x2 grid of subplots</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))  <span class="co"># 2 rows, 2 columns</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>axes <span class="op">=</span> axes.flatten()  <span class="co"># Flatten the 2D array of axes to iterate more easily</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through age groups and axes simultaneously</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, age_group <span class="kw">in</span> <span class="bu">enumerate</span>(ordered_age_groups):</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter the data for the specific age group</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    plot_data <span class="op">=</span> data_with_2nd_dates.loc[data_with_2nd_dates[<span class="st">"age_group"</span>] <span class="op">==</span> age_group, <span class="st">"1st-2nd-treatment_days"</span>]</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate the mean and median</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    mean_value <span class="op">=</span> plot_data.mean()</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    median_value <span class="op">=</span> plot_data.median()</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> axes[i]  <span class="co"># Select the correct subplot</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the histogram</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>    ax.hist(plot_data, bins<span class="op">=</span>bins, edgecolor<span class="op">=</span><span class="st">'black'</span>, density<span class="op">=</span><span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.9</span>, label<span class="op">=</span><span class="ss">f"Age Group: </span><span class="sc">{</span>age_group<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add vertical lines for mean and median</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>    mean_line <span class="op">=</span> ax.axvline(mean_value, color<span class="op">=</span><span class="st">'blue'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, label<span class="op">=</span><span class="ss">f'Mean: </span><span class="sc">{</span>mean_value<span class="sc">:.1f}</span><span class="ss">'</span>)</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>    median_line <span class="op">=</span> ax.axvline(median_value, color<span class="op">=</span><span class="st">'red'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, label<span class="op">=</span><span class="ss">f'Median: </span><span class="sc">{</span>median_value<span class="sc">:.1f}</span><span class="ss">'</span>)</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set titles and labelsdat</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    ax.set_ylim(<span class="dv">0</span>, <span class="fl">0.0020</span>)</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    ax.set_title(<span class="ss">f"Age Group: </span><span class="sc">{</span>age_group<span class="sc">}</span><span class="ss">, n=</span><span class="sc">{</span>plot_data<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Days between 1st and 2nd Treatment"</span>)</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>    ax.set_ylabel(<span class="st">"%"</span>)</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a legend that includes the mean and median lines</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>    ax.legend()</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust layout to prevent overlap</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-distribution-of-ages-days" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-distribution-of-ages-days-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Untitled_files/figure-html/fig-distribution-of-ages-days-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-distribution-of-ages-days-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Distribution of days between first and second application relative to the age group of patients.
</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-fig-count-of-ages-success-sns" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>sns.countplot(data_with_2nd_dates, x<span class="op">=</span><span class="st">"success_of_therapy"</span>, hue<span class="op">=</span><span class="st">"age_group"</span>,order<span class="op">=</span>sucess_groups)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a 2x2 grid of subplots</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-count-of-ages-success-sns" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-count-of-ages-success-sns-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Untitled_files/figure-html/fig-count-of-ages-success-sns-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-count-of-ages-success-sns-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Counts of sucess groups relative to the age group of patients.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Iz slike <a href="#fig-distribution-of-ages-success" class="quarto-xref">Figure&nbsp;8</a> je razvidno, da se pacienti iz mlajših skupin vrnejo kasneje kot pacienti iz drugih skupin. Skupina comparable se veča premosorazmerno s starostno skupino. Največji pozitivni vpliv na skupini very good in excelent imajo pacienti iz skupine 2-6 let. Porazdelitev pacientov iz skupine 6-10 let je podobna porazdelitvi pacientov 2-6 let. Skupina comparable, se pri pacientih 6-10 let zveča na račun skupine good.</p>
<div id="cell-fig-distribution-of-ages-success" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))  <span class="co"># 2 rows, 2 columns</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>axes <span class="op">=</span> axes.flatten()  <span class="co"># Flatten the 2D array of axes to iterate more easily</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through age groups and axes simultaneously</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, age_group <span class="kw">in</span> <span class="bu">enumerate</span>(ordered_age_groups):</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter the data for the specific age group</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    plot_data <span class="op">=</span> data_with_2nd_dates.loc[data_with_2nd_dates[<span class="st">"age_group"</span>] <span class="op">==</span> age_group,]</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> axes[i]  <span class="co"># Select the correct subplot</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the histogram</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    sns.countplot(x<span class="op">=</span><span class="st">"success_of_therapy"</span>, data<span class="op">=</span>plot_data, </span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>              order<span class="op">=</span>sucess_groups, ax<span class="op">=</span>ax, stat<span class="op">=</span><span class="st">"probability"</span>)</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set titles and labels</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    ax.set_title(<span class="ss">f"Success of therapy age Group: </span><span class="sc">{</span>age_group<span class="sc">}</span><span class="ss">, n=</span><span class="sc">{</span>plot_data<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Success group"</span>)</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    ax.<span class="bu">set</span>(ylim<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    ax.set_ylabel(<span class="st">"%"</span>)</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust layout to prevent overlap</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-distribution-of-ages-success" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-distribution-of-ages-success-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Untitled_files/figure-html/fig-distribution-of-ages-success-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-distribution-of-ages-success-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Distribution of sucess groups relative to the age group of patients.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="ali-obstajajo-pomembni-vzorci-v-časovnih-intervalih-glede-začetno-resnost-stanja" class="level3">
<h3 class="anchored" data-anchor-id="ali-obstajajo-pomembni-vzorci-v-časovnih-intervalih-glede-začetno-resnost-stanja">Ali obstajajo pomembni vzorci v časovnih intervalih glede začetno resnost stanja?</h3>
<p>Spremenljivko Indication smo rasporedili v 13 indikacijskih skupin:<br>
1. OCD - Osteochondritis Disecans,<br>
2. OA - Osteoarthritis,<br>
3. Cubarthrosis,<br>
4. Omarthrosis,<br>
5. Gonarthrosis,<br>
6. Coxarthrosis,<br>
7. CCL - cranial cruciate ligament,<br>
8. FCP - Fragmented Coronoid Proces,<br>
9. HP - Hip dysplasia,<br>
11. ED - Elbow dysplasia,<br>
12. Arthritis,<br>
13. Other - Arthritis,<br>
Nekaterim pacientom je bilo dodeljenih tudi več skupin. Vsak pacient, ki ima Gonarthrosis ima tudi Osteoarthritis. Imamo več pacientovn s Elbow displasio in cubarthrosis.</p>
<p>Iz slike <a href="#fig-distribution-of-indications" class="quarto-xref">Figure&nbsp;9</a> je razvidno, da ima največ pacientov Osteoarthritis. Lahko tudi vidimo, da ni večjih razlik v porazdelitvi med pacienti, ki s prejeli eno zdravljenje ali dve zdravljenji.</p>
<div id="7b09a979-691d-4dad-ae3d-dc7980818f87" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Number of all patients with indication variable is </span><span class="sc">{</span><span class="bu">sum</span>(<span class="op">~</span>data[<span class="st">'Indication'</span>].isnull())<span class="sc">}</span><span class="ss">."</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Number of all patients </span><span class="sc">{</span>data<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">."</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Number of patients with indication and 2 visits is </span><span class="sc">{</span><span class="bu">sum</span>(<span class="op">~</span>data_with_2nd_dates[<span class="st">'Indication'</span>].isnull())<span class="sc">}</span><span class="ss">."</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Number of all patients with two visits </span><span class="sc">{</span>data_with_2nd_dates<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Number of all patients with indication variable is 528.
Number of all patients 809.
Number of patients with indication and 2 visits is 118.
Number of all patients with two visits 163</code></pre>
</div>
</div>
<div id="cell-fig-distribution-of-indications" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>data_exploded <span class="op">=</span> data.explode(<span class="st">'Indication_list'</span>).reset_index()</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>data_with_2nd_dates_exploded <span class="op">=</span> data_with_2nd_dates.explode(<span class="st">'Indication_list'</span>).reset_index()</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot age at first application</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">10</span>))  <span class="co"># Adjust figure size as needed</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>ordered_indication_groups <span class="op">=</span> [<span class="st">"OCD"</span>, <span class="st">"OA"</span>, <span class="st">"Cubarthrosis"</span>, <span class="st">"Omarthrosis"</span>, <span class="st">"Gonarthrosis"</span>, <span class="st">"Coxarthrosis"</span>, <span class="st">"CCL"</span>, <span class="st">"FPC"</span>, <span class="st">"HD"</span>, <span class="st">"ED"</span>, <span class="st">"Arthritis"</span>, <span class="st">"Other"</span>]</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 1: Indication group from data</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>plot1 <span class="op">=</span> sns.countplot(x<span class="op">=</span><span class="st">"Indication_list"</span>, data<span class="op">=</span>data_exploded, </span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>                      order<span class="op">=</span>ordered_indication_groups, ax<span class="op">=</span>axes[<span class="dv">0</span>], stat<span class="op">=</span><span class="st">"probability"</span>)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"Indication at First Application (All treatments)"</span>)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylim(<span class="dv">0</span>, <span class="fl">0.35</span>)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xticklabels(axes[<span class="dv">0</span>].get_xticklabels(), rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">"right"</span>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Add counts above each bar for Plot 1</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> plot1.patches:</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].annotate(<span class="ss">f'</span><span class="sc">{</span><span class="bu">int</span>(p.get_height() <span class="op">*</span> <span class="bu">len</span>(data_exploded))<span class="sc">}</span><span class="ss">'</span>,  <span class="co"># Calculate total counts</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>                     (p.get_x() <span class="op">+</span> p.get_width() <span class="op">/</span> <span class="fl">2.</span>, p.get_height()), </span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>                     ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'baseline'</span>, fontsize<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">'black'</span>, xytext<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">3</span>), </span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>                     textcoords<span class="op">=</span><span class="st">'offset points'</span>)</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 2: Age group at first application from data</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>plot2 <span class="op">=</span> sns.countplot(x<span class="op">=</span><span class="st">"Indication_list"</span>, data<span class="op">=</span>data_with_2nd_dates_exploded, </span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>                      order<span class="op">=</span>ordered_indication_groups, ax<span class="op">=</span>axes[<span class="dv">1</span>], stat<span class="op">=</span><span class="st">"probability"</span>)</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"Indication at First Application (2 visits)"</span>)</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylim(<span class="dv">0</span>, <span class="fl">0.35</span>)</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xticklabels(axes[<span class="dv">1</span>].get_xticklabels(), rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">"right"</span>)</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> plot2.patches:</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">1</span>].annotate(<span class="ss">f'</span><span class="sc">{</span><span class="bu">int</span>(p.get_height() <span class="op">*</span> <span class="bu">len</span>(data_with_2nd_dates_exploded))<span class="sc">}</span><span class="ss">'</span>,  <span class="co"># Calculate total counts</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>                     (p.get_x() <span class="op">+</span> p.get_width() <span class="op">/</span> <span class="fl">2.</span>, p.get_height()), </span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>                     ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'baseline'</span>, fontsize<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">'black'</span>, xytext<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">3</span>), </span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>                     textcoords<span class="op">=</span><span class="st">'offset points'</span>)</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\justb\AppData\Local\Temp\ipykernel_30060\3994771153.py:17: UserWarning: set_ticklabels() should only be used with a fixed number of ticks, i.e. after set_ticks() or using a FixedLocator.
  axes[0].set_xticklabels(axes[0].get_xticklabels(), rotation=45, ha="right")
C:\Users\justb\AppData\Local\Temp\ipykernel_30060\3994771153.py:31: UserWarning: set_ticklabels() should only be used with a fixed number of ticks, i.e. after set_ticks() or using a FixedLocator.
  axes[1].set_xticklabels(axes[1].get_xticklabels(), rotation=45, ha="right")</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-distribution-of-indications" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-distribution-of-indications-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Untitled_files/figure-html/fig-distribution-of-indications-output-2.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-distribution-of-indications-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: Distribution of indications before first application
</figcaption>
</figure>
</div>
</div>
</div>
<p>Na seznamu, ki je natisnjen spodaj lahko najdete indikacije, ki niso bile del nobene indikacijske kupine.</p>
<div id="853582f8-0e2f-49ed-982e-0b1c8f2c2820" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print other indications</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>data.loc[data[<span class="st">"Indication_list"</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">"Other"</span> <span class="kw">in</span> x), <span class="st">"Indication"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>array([nan, 'Paraplegia post.', 'Annular ligament syndrome', 'Dysplasia',
       'Tendinitis OB', 'OBS tear', 'Fracture',
       'Spondylosis, Spondylarthrosis', 'PCM left Elbow',
       'OCCC therapy + atrogenic infection', 'Cartilage crack',
       'Cartilage damage in the left front ankle joint',
       'Massive cartilage damage in right Knee joint, Cruciate ligament tear',
       'Talocrural left filled',
       'Stem cell extraction, shock wave therapy',
       'medial meniscus intact? (procedure 14.7.2016)',
       'Patellar groove osteolysis due to MRSP infection, MRSP cured',
       'High suspicion of a complete rupture of the left biceps Tendon',
       'A lot in pdf (anlage)', 'Cruciate Ligament tear left',
       'metacarpal bones &amp; right Shoulder', 'front right Fetlock',
       'Ligament rupture cruciata cran', 'CCLR dex.',
       'Asynchronous Growth radius/ulna of the both Elbows; cub dex, et-sim',
       'Fragmented proc coronoid right', 'Xeltrose Shoulder left',
       'IOCH/MIF EG Links',
       'Osteoartis of the front right metatarsal joint',
       'Cruciate ligament tear NB', 'KRR',
       'bilateral Tendinosis Biceps + Supraspinatus tendon',
       'acute/chronic back pain/Lumbosacral syndrome',
       'Suspensory ligament front right lateral',
       'Front right Ankle joint', 'Polyarthrosis', 'Injury m. peroneus',
       'nodular dermatitis focal luik knee?, bone necrosis',
       'Ellbow problem', ' Fetlock joint/neck edema?',
       'Arth. changes right Elbow',
       'Fractured proc. Anconaeus left + Coronoid disease left',
       'Prophylactic removal',
       'medial compartment disease left Elbow with fissure',
       'bilateral open physis of the tub. supraglenoidal',
       'mild tear, degeneration of the medial meniscus, degenerative changes',
       'Medial compartment disease Elbow bilateral',
       'Polyarthritis of Shoulders and Elbows, Spondyloarthrosis',
       'Cartilage damage front left Fetlock',
       'Chronic ankle inflammation, severe swelling', 'Hip problem',
       'Lesion of the internal interosseous muscle - lateral branch',
       'Medial compartment disease bilateral',
       'ggr coronoid pathology bilateral with apical fissure &amp; sclerosis, moderate-severe flexorenthesiomyopathy, re ggo, moderate joint filling',
       'Lameness right front arthroscopy', 'Incontinence'], dtype=object)</code></pre>
</div>
</div>
<p>Na sliki <a href="#fig-ref-distribution-of-indications" class="quarto-xref">Figure&nbsp;10</a> so prikazane porazdelitve obzervacij za katere imamo podatke indikacij, torej 118 obzervacij.</p>
<div id="cell-fig-ref-distribution-of-indications" class="cell" data-execution_count="32">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">5</span>))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>data_with_indications <span class="op">=</span> data_with_2nd_dates[<span class="op">~</span>data_with_2nd_dates[<span class="st">'Indication'</span>].isnull()]</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>sns.countplot(x<span class="op">=</span><span class="st">"success_of_therapy"</span>, data<span class="op">=</span>data_with_indications, </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>              order<span class="op">=</span>sucess_groups, ax<span class="op">=</span>axes[<span class="dv">0</span>], stat<span class="op">=</span><span class="st">"probability"</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"Sucess groups of treatments"</span>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylim(<span class="dv">0</span>, <span class="fl">0.35</span>)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xticklabels(axes[<span class="dv">0</span>].get_xticklabels(), rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">"right"</span>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>mean_value <span class="op">=</span> data_with_indications[<span class="st">"1st-2nd-treatment_days"</span>].mean()</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>median_value <span class="op">=</span> data_with_indications[<span class="st">"1st-2nd-treatment_days"</span>].median()</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].hist(data_with_indications[<span class="st">"1st-2nd-treatment_days"</span>], bins<span class="op">=</span>bins, edgecolor<span class="op">=</span><span class="st">'black'</span>, density<span class="op">=</span><span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.9</span>, label<span class="op">=</span><span class="ss">f"Age Group: </span><span class="sc">{</span>age_group<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>mean_line <span class="op">=</span> axes[<span class="dv">1</span>].axvline(mean_value, color<span class="op">=</span><span class="st">'blue'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, label<span class="op">=</span><span class="ss">f'Mean: </span><span class="sc">{</span>mean_value<span class="sc">:.1f}</span><span class="ss">'</span>)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>median_line <span class="op">=</span> axes[<span class="dv">1</span>].axvline(median_value, color<span class="op">=</span><span class="st">'red'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, label<span class="op">=</span><span class="ss">f'Median: </span><span class="sc">{</span>median_value<span class="sc">:.1f}</span><span class="ss">'</span>)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylim(<span class="dv">0</span>, <span class="fl">0.0020</span>)</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="ss">f"Age Group: </span><span class="sc">{</span>age_group<span class="sc">}</span><span class="ss">, n=</span><span class="sc">{</span>plot_data<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">"Days between 1st and 2nd Treatment"</span>)</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">"%"</span>)</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a legend that includes the mean and median lines</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].legend()</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\justb\AppData\Local\Temp\ipykernel_30060\236521874.py:13: UserWarning: set_ticklabels() should only be used with a fixed number of ticks, i.e. after set_ticks() or using a FixedLocator.
  axes[0].set_xticklabels(axes[0].get_xticklabels(), rotation=45, ha="right")</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-ref-distribution-of-indications" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ref-distribution-of-indications-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Untitled_files/figure-html/fig-ref-distribution-of-indications-output-2.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ref-distribution-of-indications-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10: Distribution of indications before first application
</figcaption>
</figure>
</div>
</div>
</div>
<p>Na sliki <a href="#fig-distribution-of-days-indication-group" class="quarto-xref">Figure&nbsp;11</a> lahko najdete porazdelitve dni med prvim in dugim zdravljenjem, ki so odvisna od indikacijske skupine. Obravnavali smo sam indikacijske skupine, ki imajo več kot deset obzervacij.</p>
<div id="cell-fig-distribution-of-days-indication-group" class="cell" data-execution_count="17">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the bin edges manually, for example:</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>min_days <span class="op">=</span> data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>].<span class="bu">min</span>()</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>max_days <span class="op">=</span> data_with_2nd_dates[<span class="st">"1st-2nd-treatment_days"</span>].<span class="bu">max</span>()</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>bins <span class="op">=</span> np.linspace(min_days, max_days, <span class="dv">15</span>)  <span class="co"># 14 bins</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>min_shape_size <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a 2x2 grid of subplots</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">3</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>))  <span class="co"># 2 rows, 2 columns</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>axes <span class="op">=</span> axes.flatten()  <span class="co"># Flatten the 2D array of axes to iterate more easily</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through indication groups and axes simultaneously</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _, indication_group <span class="kw">in</span> <span class="bu">enumerate</span>(ordered_indication_groups):</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter the data for the specific indication group</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    plot_data <span class="op">=</span> data_with_2nd_dates.loc[data_with_2nd_dates[<span class="st">'Indication_list'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> list_variable: indication_group <span class="kw">in</span> list_variable), </span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>                                                                                     <span class="st">"1st-2nd-treatment_days"</span>]</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> plot_data.shape[<span class="dv">0</span>]<span class="op">&lt;</span><span class="dv">10</span>:</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate the mean and median</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    mean_value <span class="op">=</span> plot_data.mean()</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    median_value <span class="op">=</span> plot_data.median()</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> axes[i]  <span class="co"># Select the correct subplot</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the histogram</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    ax.hist(plot_data, bins<span class="op">=</span>bins, edgecolor<span class="op">=</span><span class="st">'black'</span>, density<span class="op">=</span><span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.9</span>, label<span class="op">=</span><span class="ss">f"Indication Group: </span><span class="sc">{</span>indication_group<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add vertical lines for mean and median</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>    mean_line <span class="op">=</span> ax.axvline(mean_value, color<span class="op">=</span><span class="st">'blue'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, label<span class="op">=</span><span class="ss">f'Mean: </span><span class="sc">{</span>mean_value<span class="sc">:.1f}</span><span class="ss">'</span>)</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>    median_line <span class="op">=</span> ax.axvline(median_value, color<span class="op">=</span><span class="st">'red'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, label<span class="op">=</span><span class="ss">f'Median: </span><span class="sc">{</span>median_value<span class="sc">:.1f}</span><span class="ss">'</span>)</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set titles and labelsdat</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>    ax.set_ylim(<span class="dv">0</span>, <span class="fl">0.0030</span>)</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>    ax.set_title(<span class="ss">f"Indication Group: </span><span class="sc">{</span>indication_group<span class="sc">}</span><span class="ss">, n=</span><span class="sc">{</span>plot_data<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Days between 1st and 2nd Treatment"</span>)</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>    ax.set_ylabel(<span class="st">"%"</span>)</span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a legend that includes the mean and median lines</span></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>    ax.legend()</span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> i<span class="op">+</span><span class="dv">1</span></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust layout to prevent overlap</span></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-distribution-of-days-indication-group" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-distribution-of-days-indication-group-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Untitled_files/figure-html/fig-distribution-of-days-indication-group-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-distribution-of-days-indication-group-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;11: Distribution days between first treatment in relation to the indication group.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Na grafih <a href="#fig-distribution-of-inication-group-success" class="quarto-xref">Figure&nbsp;12</a> so pirkazane porazderitve skupine uspešnosti v relaciji z indikacijskimi skupinami.</p>
<div id="cell-fig-distribution-of-inication-group-success" class="cell" data-execution_count="24">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">6</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">30</span>))  <span class="co"># 2 rows, 2 columns</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>axes <span class="op">=</span> axes.flatten()  <span class="co"># Flatten the 2D array of axes to iterate more easily</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through age groups and axes simultaneously</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, indication <span class="kw">in</span> <span class="bu">enumerate</span>(ordered_indication_groups):</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter the data for the specific age group</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    plot_data <span class="op">=</span> data_with_2nd_dates.loc[data_with_2nd_dates[<span class="st">'Indication_list'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> list_variable: indication <span class="kw">in</span> list_variable)]</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> axes[i]  <span class="co"># Select the correct subplot</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the histogram</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    sns.countplot(x<span class="op">=</span><span class="st">"success_of_therapy"</span>, data<span class="op">=</span>plot_data, </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>              order<span class="op">=</span>sucess_groups, ax<span class="op">=</span>ax, stat<span class="op">=</span><span class="st">"probability"</span>)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set titles and labels</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    ax.set_title(<span class="ss">f"Success of therapy indication Group: </span><span class="sc">{</span>indication<span class="sc">}</span><span class="ss">, n=</span><span class="sc">{</span>plot_data<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Success group"</span>)</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    ax.<span class="bu">set</span>(ylim<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>    ax.set_ylabel(<span class="st">"%"</span>)</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust layout to prevent overlap</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-distribution-of-inication-group-success" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-distribution-of-inication-group-success-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Untitled_files/figure-html/fig-distribution-of-inication-group-success-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-distribution-of-inication-group-success-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;12: Distribution of sucess groups relative to the age group of patients.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="število-zdravljenih-sklepov" class="level2">
<h2 class="anchored" data-anchor-id="število-zdravljenih-sklepov">5. Število zdravljenih sklepov:</h2>
<section id="koliko-sklepov-je-običajno-zdravljenih-med-začetno-terapijo-in-koliko-jih-je-zdravljenih-v-nadaljnjih-terapijah" class="level3">
<h3 class="anchored" data-anchor-id="koliko-sklepov-je-običajno-zdravljenih-med-začetno-terapijo-in-koliko-jih-je-zdravljenih-v-nadaljnjih-terapijah">Koliko sklepov je običajno zdravljenih med začetno terapijo in koliko jih je zdravljenih v nadaljnjih terapijah?</h3>
</section>
<section id="counts-of-numbers-of-joints-treated-in-first-tratement" class="level3">
<h3 class="anchored" data-anchor-id="counts-of-numbers-of-joints-treated-in-first-tratement">Counts of numbers of joints treated in first tratement</h3>
<div id="3224c4f0-0574-4423-911d-0455232f46e8" class="cell" data-execution_count="19">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"Nr_joints treated_1_cleaned"</span>] <span class="op">=</span> data[<span class="st">"Nr_joints treated_1_cleaned"</span>].astype(<span class="bu">str</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"Nr_joints treated_1_cleaned"</span>]<span class="op">=</span>data[<span class="st">"Nr_joints treated_1_cleaned"</span>].<span class="bu">str</span>.replace(<span class="st">"?"</span>, <span class="st">""</span>, regex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"darkgrid"</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.countplot(x<span class="op">=</span><span class="st">"Nr_joints treated_1_cleaned"</span>, data<span class="op">=</span>data, order<span class="op">=</span> [<span class="st">"nan"</span>,<span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"4"</span>, <span class="st">"5"</span>, <span class="st">"6"</span>, <span class="st">"7"</span>, <span class="st">"8"</span>, <span class="st">"STORAGE"</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Untitled_files/figure-html/cell-21-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="counts-of-numbers-of-joints-treated-in-first-tratement.-only-treatments-where-second-treatment-also-happened" class="level3">
<h3 class="anchored" data-anchor-id="counts-of-numbers-of-joints-treated-in-first-tratement.-only-treatments-where-second-treatment-also-happened">Counts of numbers of joints treated in first tratement. Only treatments where second treatment also happened</h3>
<div id="dd95da3d-bced-4c27-af76-be0334c46952" class="cell" data-execution_count="20">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>modified<span class="op">=</span>data[<span class="op">~</span>data[<span class="st">"Nr_joints treated_2"</span>].isnull()]</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"darkgrid"</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.countplot(x<span class="op">=</span><span class="st">"Nr_joints treated_1_cleaned"</span>, data<span class="op">=</span>modified, order<span class="op">=</span>[<span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"4"</span>, <span class="st">"5"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Untitled_files/figure-html/cell-22-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="counts-of-numbers-of-joints-treated-in-second-tratement" class="level3">
<h3 class="anchored" data-anchor-id="counts-of-numbers-of-joints-treated-in-second-tratement">Counts of numbers of joints treated in second tratement</h3>
<div id="73b1648c-639c-4fe9-ac47-064e6e908920" class="cell" data-execution_count="21">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"darkgrid"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.countplot(x<span class="op">=</span><span class="st">"Nr_joints treated_2"</span>, data<span class="op">=</span>data, order<span class="op">=</span> [<span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"4"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Untitled_files/figure-html/cell-23-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="a1d80b42-c65f-43c7-a0fa-fb10f6014350" class="cell" data-execution_count="22">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"first_to_second_treatment"</span>] <span class="op">=</span> modified[<span class="st">"Nr_joints treated_1_cleaned"</span>]<span class="op">+</span> <span class="st">"-&gt;"</span> <span class="op">+</span> modified[<span class="st">"Nr_joints treated_2"</span>].astype(<span class="bu">str</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"darkgrid"</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.countplot(x<span class="op">=</span><span class="st">"first_to_second_treatment"</span>, data<span class="op">=</span>data, order <span class="op">=</span> data[<span class="st">"first_to_second_treatment"</span>].value_counts().index)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>ax.tick_params(axis<span class="op">=</span><span class="st">'x'</span>, rotation<span class="op">=</span><span class="dv">45</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Untitled_files/figure-html/cell-24-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>